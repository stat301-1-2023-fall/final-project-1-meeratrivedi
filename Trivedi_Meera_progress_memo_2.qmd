---
title: "Progress Memo 2"
subtitle: |
  | Final Project 
  | Data Science 1 with R (STAT 301-1)
author: "Meera Trivedi"

format:
  html:
    toc: true
    embed-resources: true
    
execute:
  echo: false
  warning: false

from: markdown+emoji 
---

::: {.callout-tip icon="false"}
## Github Repo Link

[My GitHub Repo](https://github.com/stat301-1-2023-fall/final-project-1-meeratrivedi.git)
:::

## Data and Packages

```{r}
#| message: false

library(tidyverse)

lines <- read_csv("data/raw/friends.csv")
info <- read_csv("data/raw/friends_info.csv")
emotions <- read_csv("data/raw/friends_emotions.csv")
```

## Introduction

explanation

## Data Cleaning

### Joining Datasets

explanation

```{r}
#| message: false
lines_info <- 
  lines |> 
  full_join(info) |> 
  select(!text)

lines_info_emotions <- lines_info |> 
  full_join(emotions) |> 
  filter(!is.na(emotion)) |> 
  rename(episode_air_date = air_date, 
         episode_us_views_millions = us_views_millions, 
         episode_imdb_rating = imdb_rating, 
         writers = written_by,
         directors = directed_by,
         line_emotion = emotion) |> 
  relocate(title, directors, writers, season, episode, scene, utterance, speaker, line_emotion, episode_air_date, episode_us_views_millions, episode_imdb_rating)

write_rds(lines_info_emotions, file = "data/new/lines_info_emotions.rda")

lines_info_emotions |> 
  slice_head(n = 10) |> 
  knitr::kable()
```


### Subsetting Data

```{r}
guestcharacters <- lines |> 
  filter(!speaker %in% c("Monica Geller", 
                         "Ross Geller", 
                         "Rachel Green", 
                         "Phoebe Buffay", 
                         "Joey Tribbiani", 
                         "Chandler Bing", 
                         "Scene Directions", 
                         "#ALL#")) |> 
  filter(!is.na(speaker))

topguestcharacters <- guestcharacters |> 
  group_by(speaker) |> 
  count(speaker) |> 
  filter(n > 10) |> 
  arrange(desc(n)) |> 
  rename(num_lines = n)
  
top10 <- head(topguestcharacters, n=10)

top10
```

```{r}
writers <- info |> 
  count(written_by) |>
  filter(n > 1) |> 
  arrange(desc(n)) |> 
  rename(episodes_written = n) |> 
  slice_max(episodes_written, n = 11)

writers
```

```{r}
topguestlines <- lines |> 
  filter(speaker %in% top10$speaker) |> 
  mutate(speaker = factor(speaker, 
                          #order of levels
                          levels = top10$speaker)) |> 
  relocate(speaker, season, episode, scene, utterance, text)

topguestlines
```



## Summary Statistics

explanation

```{r}
info |> 
  summarize(mean = mean(imdb_rating), 
            .by = season) |>
  knitr::kable()
```


```{r}
info |> 
  summarize(mean = mean(us_views_millions), 
            .by = season) |> 
  knitr::kable()
```

## Univariate Analyses

@fig-bar1 first shows us the distribution of the number of ... 

![Line Count of the Six Main Characters](plots/line_dist_maincharacters.png){#fig-bar1}

@fig-bar2 first shows us the distribution of the number of ... 

![Line Count of the Guest Characters](plots/line_dist_guestcharacters.png){#fig-bar2}



@fig-plot1 first shows us the distribution of the number of ... 

![Line Count - Monica Geller](plots/line_by_season_monica.png){#fig-plot1}

@fig-bar3 first shows us the distribution of the number of ... 

![Count of Lines by Emotion](plots/emotions_count.png){#fig-bar3}

## Multivariate Analyses

explanation

@fig-plot2 first shows us the distribution of the number of ... 

![Line Count - Main Characters](plots/line_by_season_maincharacters.png){#fig-plot2}



## Summary of Progress

explanation

